{"ast":null,"code":"import _slicedToArray from\"/Users/alex/personal_projects/ChatRoom/chatclient/livegab/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import DesktopSideBar from'./DesktopSideBar';import MobileSideBar from'./MobileSideBar';import ChatContent from'./ChatContent';import MessageInput from'./MessageInput';import SideBarToggle from'./SideBarToggle';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatBox=function ChatBox(_ref){var tab=_ref.tab,userData=_ref.userData,publicChats=_ref.publicChats,privateChats=_ref.privateChats,handleValue=_ref.handleValue,sendPublicMessage=_ref.sendPublicMessage,sendPrivateMessage=_ref.sendPrivateMessage,setTab=_ref.setTab;var chatContentRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sidebarOpen=_useState2[0],setSidebarOpen=_useState2[1];useEffect(function(){initialScroll();});useEffect(function(){autoScroll();},[publicChats,privateChats]);var autoScroll=function autoScroll(){if(chatContentRef.current&&chatContentRef.current.scrollTop>=chatContentRef.current.scrollHeight-window.screen.height*0.92){chatContentRef.current.scrollTop=chatContentRef.current.scrollHeight;}};var initialScroll=function initialScroll(){if(chatContentRef.current.scrollTop===0){chatContentRef.current.scrollTop=chatContentRef.current.scrollHeight;}};var handleSidebarToggle=function handleSidebarToggle(){setSidebarOpen(!sidebarOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"drop-shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(SideBarToggle,{className:\"drop-shadow-xl\",handleSidebarToggle:handleSidebarToggle,sidebarOpen:sidebarOpen})}),!sidebarOpen?null:/*#__PURE__*/_jsx(\"div\",{className:\"fixed border-r-2 border-[#27292c] left-0 z-10 h-screen bg-[#282b30] w-full\",children:/*#__PURE__*/_jsx(MobileSideBar,{tab:tab,privateChats:privateChats,setTab:setTab,userData:userData,handleSidebarToggle:handleSidebarToggle})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Chatbox  h-screen flex flex-col-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\" w-full max-w-[20%] bg-[#282b30] hidden sm:block  text-white shadow-lg\",children:/*#__PURE__*/_jsx(DesktopSideBar,{tab:tab,privateChats:privateChats,setTab:setTab,userData:userData})}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-[90%]  sm:ml-0 ml-8 w-screen overflow-y-auto\",ref:chatContentRef,children:[/*#__PURE__*/_jsx(ChatContent,{tab:tab,userData:userData,publicChats:publicChats,privateChats:privateChats,handleValue:handleValue,sendPublicMessage:sendPublicMessage,sendPrivateMessage:sendPrivateMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 pr-4 h-[8%] sm:w-[79%] w-[98%] fixed bottom-0 right-0\",children:/*#__PURE__*/_jsx(MessageInput,{tab:tab,userData:userData,publicChats:publicChats,privateChats:privateChats,handleValue:handleValue,sendPublicMessage:sendPublicMessage,sendPrivateMessage:sendPrivateMessage})})]})]})]});};export default ChatBox;","map":{"version":3,"names":["React","useEffect","useRef","useState","DesktopSideBar","MobileSideBar","ChatContent","MessageInput","SideBarToggle","jsx","_jsx","jsxs","_jsxs","ChatBox","_ref","tab","userData","publicChats","privateChats","handleValue","sendPublicMessage","sendPrivateMessage","setTab","chatContentRef","_useState","_useState2","_slicedToArray","sidebarOpen","setSidebarOpen","initialScroll","autoScroll","current","scrollTop","scrollHeight","window","screen","height","handleSidebarToggle","className","children","ref"],"sources":["/Users/alex/personal_projects/ChatRoom/chatclient/livegab/react/src/Components/ChatBox.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport DesktopSideBar from './DesktopSideBar';\nimport MobileSideBar from './MobileSideBar';\nimport ChatContent from './ChatContent';\nimport MessageInput from './MessageInput';\nimport SideBarToggle from './SideBarToggle';\n\nconst ChatBox = ({tab, userData, publicChats, privateChats, handleValue, sendPublicMessage, sendPrivateMessage, setTab}) => {\n\n  const chatContentRef = useRef(null);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  useEffect(() => {\n    initialScroll();\n  }, );\n\n  useEffect(() => {\n    autoScroll();\n  }, [publicChats, privateChats]);\n\n  const autoScroll = () => {\n    if (\n      chatContentRef.current &&\n      chatContentRef.current.scrollTop >=\n        chatContentRef.current.scrollHeight - window.screen.height * 0.92\n    ) {\n      chatContentRef.current.scrollTop = chatContentRef.current.scrollHeight;\n    }\n  };\n\n  const initialScroll = () => {\n    if (chatContentRef.current.scrollTop === 0) {\n      chatContentRef.current.scrollTop = chatContentRef.current.scrollHeight;\n    }\n  };\n\n  const handleSidebarToggle = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  return (\n    \n    <div className='drop-shadow-md'>\n      <div className='ml-1'>\n        <SideBarToggle\n        className='drop-shadow-xl'\n        handleSidebarToggle={handleSidebarToggle} \n        sidebarOpen={sidebarOpen} \n        />\n      </div>\n      {\n        !sidebarOpen ? \n        null : (\n          <div className='fixed border-r-2 border-[#27292c] left-0 z-10 h-screen bg-[#282b30] w-full'>\n            <MobileSideBar\n              tab={tab} \n              privateChats={privateChats} \n              setTab={setTab} userData={userData} \n              handleSidebarToggle={handleSidebarToggle}\n              />\n          </div>\n        )\n      }\n      <div className='Chatbox  h-screen flex flex-col-1'>\n        <div className=' w-full max-w-[20%] bg-[#282b30] hidden sm:block  text-white shadow-lg'>\n          <DesktopSideBar tab={tab} privateChats={privateChats} setTab={setTab} userData={userData}/>\n        </div>\n        <div className='h-[90%]  sm:ml-0 ml-8 w-screen overflow-y-auto'\n        ref={chatContentRef}>\n          <ChatContent\n            tab={tab}\n            userData={userData}\n            publicChats={publicChats}\n            privateChats={privateChats}\n            handleValue={handleValue}\n            sendPublicMessage={sendPublicMessage}\n            sendPrivateMessage={sendPrivateMessage}\n          />\n          <div className='mb-4 pr-4 h-[8%] sm:w-[79%] w-[98%] fixed bottom-0 right-0'>\n            <MessageInput\n              tab={tab}\n              userData={userData}\n              publicChats={publicChats}\n              privateChats={privateChats}\n              handleValue={handleValue}\n              sendPublicMessage={sendPublicMessage}\n              sendPrivateMessage={sendPrivateMessage}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatBox;\n"],"mappings":"qJAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5C,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAAC,IAAA,CAA+G,IAA1G,CAAAC,GAAG,CAAAD,IAAA,CAAHC,GAAG,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,WAAW,CAAAH,IAAA,CAAXG,WAAW,CAAEC,YAAY,CAAAJ,IAAA,CAAZI,YAAY,CAAEC,WAAW,CAAAL,IAAA,CAAXK,WAAW,CAAEC,iBAAiB,CAAAN,IAAA,CAAjBM,iBAAiB,CAAEC,kBAAkB,CAAAP,IAAA,CAAlBO,kBAAkB,CAAEC,MAAM,CAAAR,IAAA,CAANQ,MAAM,CAEpH,GAAM,CAAAC,cAAc,CAAGrB,MAAM,CAAC,IAAI,CAAC,CACnC,IAAAsB,SAAA,CAAsCrB,QAAQ,CAAC,KAAK,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA9CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAElCxB,SAAS,CAAC,UAAM,CACd4B,aAAa,CAAC,CAAC,CACjB,CAAG,CAAC,CAEJ5B,SAAS,CAAC,UAAM,CACd6B,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACb,WAAW,CAAEC,YAAY,CAAC,CAAC,CAE/B,GAAM,CAAAY,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GACEP,cAAc,CAACQ,OAAO,EACtBR,cAAc,CAACQ,OAAO,CAACC,SAAS,EAC9BT,cAAc,CAACQ,OAAO,CAACE,YAAY,CAAGC,MAAM,CAACC,MAAM,CAACC,MAAM,CAAG,IAAI,CACnE,CACAb,cAAc,CAACQ,OAAO,CAACC,SAAS,CAAGT,cAAc,CAACQ,OAAO,CAACE,YAAY,CACxE,CACF,CAAC,CAED,GAAM,CAAAJ,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAIN,cAAc,CAACQ,OAAO,CAACC,SAAS,GAAK,CAAC,CAAE,CAC1CT,cAAc,CAACQ,OAAO,CAACC,SAAS,CAAGT,cAAc,CAACQ,OAAO,CAACE,YAAY,CACxE,CACF,CAAC,CAED,GAAM,CAAAI,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAA,CAAS,CAChCT,cAAc,CAAC,CAACD,WAAW,CAAC,CAC9B,CAAC,CAED,mBAEEf,KAAA,QAAK0B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B7B,IAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB7B,IAAA,CAACF,aAAa,EACd8B,SAAS,CAAC,gBAAgB,CAC1BD,mBAAmB,CAAEA,mBAAoB,CACzCV,WAAW,CAAEA,WAAY,CACxB,CAAC,CACC,CAAC,CAEJ,CAACA,WAAW,CACZ,IAAI,cACFjB,IAAA,QAAK4B,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF7B,IAAA,CAACL,aAAa,EACZU,GAAG,CAAEA,GAAI,CACTG,YAAY,CAAEA,YAAa,CAC3BI,MAAM,CAAEA,MAAO,CAACN,QAAQ,CAAEA,QAAS,CACnCqB,mBAAmB,CAAEA,mBAAoB,CACxC,CAAC,CACD,CACN,cAEHzB,KAAA,QAAK0B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD7B,IAAA,QAAK4B,SAAS,CAAC,wEAAwE,CAAAC,QAAA,cACrF7B,IAAA,CAACN,cAAc,EAACW,GAAG,CAAEA,GAAI,CAACG,YAAY,CAAEA,YAAa,CAACI,MAAM,CAAEA,MAAO,CAACN,QAAQ,CAAEA,QAAS,CAAC,CAAC,CACxF,CAAC,cACNJ,KAAA,QAAK0B,SAAS,CAAC,gDAAgD,CAC/DE,GAAG,CAAEjB,cAAe,CAAAgB,QAAA,eAClB7B,IAAA,CAACJ,WAAW,EACVS,GAAG,CAAEA,GAAI,CACTC,QAAQ,CAAEA,QAAS,CACnBC,WAAW,CAAEA,WAAY,CACzBC,YAAY,CAAEA,YAAa,CAC3BC,WAAW,CAAEA,WAAY,CACzBC,iBAAiB,CAAEA,iBAAkB,CACrCC,kBAAkB,CAAEA,kBAAmB,CACxC,CAAC,cACFX,IAAA,QAAK4B,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzE7B,IAAA,CAACH,YAAY,EACXQ,GAAG,CAAEA,GAAI,CACTC,QAAQ,CAAEA,QAAS,CACnBC,WAAW,CAAEA,WAAY,CACzBC,YAAY,CAAEA,YAAa,CAC3BC,WAAW,CAAEA,WAAY,CACzBC,iBAAiB,CAAEA,iBAAkB,CACrCC,kBAAkB,CAAEA,kBAAmB,CACxC,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAR,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}